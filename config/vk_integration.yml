# VK Integration Configuration
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å VK Teams –∏ VK OAuth

vk_oauth:
  enabled: true
  client_id: "${VK_OAUTH_CLIENT_ID}"
  client_secret: "${VK_OAUTH_CLIENT_SECRET}"
  redirect_uri: "${VK_OAUTH_REDIRECT_URI}"
  scopes:
    - email
    - offline
  
  # –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö VK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (VK ID)
  allowed_users:
    - "123456789"  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ã–µ VK ID
    - "987654321"
    # –î–æ–±–∞–≤—å—Ç–µ –±–æ–ª—å—à–µ ID –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

vk_teams:
  enabled: true
  bot_token: "${VK_TEAMS_BOT_TOKEN}"
  api_url: "https://api.internal.myteam.mail.ru/bot/v1"
  webhook_url: "${VK_TEAMS_WEBHOOK_URL}"
  
  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  auto_create_users: true
  
  # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –±—é–¥–∂–µ—Ç–∞ –¥–ª—è VK Teams –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  default_budget:
    limit: 500.0
    scopes: ["basic", "vk_teams"]
  
  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞
  access_control:
    enabled: true
    use_oauth_whitelist: true  # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∏–∑ vk_oauth.allowed_users
    
  # –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ–± –æ—Ç–∫–∞–∑–µ –≤ –¥–æ—Å—Ç—É–ø–µ
  access_denied:
    message: |
      üö´ –î–æ—Å—Ç—É–ø –æ–≥—Ä–∞–Ω–∏—á–µ–Ω
      
      –î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI Assistant –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ:
      1. –ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è —á–µ—Ä–µ–∑ VK OAuth
      2. –ë—ã—Ç—å –≤ —Å–ø–∏—Å–∫–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
      
      –û–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ—Å—Ç—É–ø–∞.
    
    contact_info:
      admin_email: "admin@your-company.com"
      support_chat: "@ai_assistant_support"

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
default_user_settings:
  vk_oauth_users:
    budget_limit: 1000.0
    scopes: ["basic", "vk_user", "search", "generate"]
    auto_approve: true
    
  vk_teams_users:
    budget_limit: 500.0
    scopes: ["basic", "vk_teams"]
    auto_approve: true
    temporary: true  # –°–æ–∑–¥–∞–≤–∞—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

# –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –±—é–¥–∂–µ—Ç–æ–≤
budget_integration:
  # –°–≤—è–∑—ã–≤–∞–Ω–∏–µ VK ID —Å –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  user_mapping:
    by_vk_id: true
    by_email: true  # –ï—Å–ª–∏ email –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ VK API
    
  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–ª—è VK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  auto_refill:
    enabled: true
    include_vk_users: true
    vk_user_role: "vk_user"  # –†–æ–ª—å –¥–ª—è VK –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤ budget_config.yml

# –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
security:
  # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ webhook
  verify_webhook_signature: true
  webhook_secret: "${VK_TEAMS_WEBHOOK_SECRET}"
  
  # –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–∏
  session_timeout: 3600  # 1 —á–∞—Å
  
  # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
  log_vk_interactions: true
  log_level: "INFO"

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
monitoring:
  enabled: true
  
  # –ú–µ—Ç—Ä–∏–∫–∏
  track_usage: true
  track_user_activity: true
  track_budget_usage: true
  
  # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
  generate_reports: true
  report_interval: "daily" 