# üöÄ –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å VK Teams

## üìã –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ
1. [–û–±–∑–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏](#–æ–±–∑–æ—Ä-–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
2. [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞)
3. [–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ VK Teams](#–Ω–∞—Å—Ç—Ä–æ–π–∫–∞-–±–æ—Ç–∞-vk-teams)
4. [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AI Assistant](#–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è-ai-assistant)
5. [–†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ](#—Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
6. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
7. [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](#–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)
8. [–£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## üéØ –û–±–∑–æ—Ä –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

AI Assistant –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω —Å VK Teams –¥–ª—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–ª–µ–¥—É—é—â–∏—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π:

### –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- **–ß–∞—Ç-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å**: –ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –≤ VK Teams
- **–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫**: –ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º –¥–∞–Ω–Ω—ã—Ö
- **RFC –≥–µ–Ω–µ—Ä–∞—Ü–∏—è**: –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
- **Code Review**: –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- **Document Analysis**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –∞–Ω–∞–ª–∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
```
VK Teams ‚Üî VK Teams Bot ‚Üî AI Assistant API ‚Üî Backend Services
```

---

## üõ† –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- **VK Teams** –∞–∫–∫–∞—É–Ω—Ç (–∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–π –∏–ª–∏ –ª–∏—á–Ω—ã–π)
- **VK Teams Admin** –ø—Ä–∞–≤–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–æ–≤
- **AI Assistant** —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—ã–π –∏ —Ä–∞–±–æ—Ç–∞—é—â–∏–π
- **–ü—É–±–ª–∏—á–Ω—ã–π URL** –¥–ª—è webhook'–æ–≤ (HTTPS –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
```bash
# –ü—Ä–æ–≤–µ—Ä–∏–º —á—Ç–æ AI Assistant —Ä–∞–±–æ—Ç–∞–µ—Ç
curl -s http://localhost:8000/health

# –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å:
# {"status":"healthy","architecture":"hexagonal","environment":"development","version":"2.0.0"}
```

---

## ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞ VK Teams

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–æ—Ç–∞

1. **–û—Ç–∫—Ä–æ–π—Ç–µ VK Teams** –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
2. **–ù–∞–π–¥–∏—Ç–µ —Ä–∞–∑–¥–µ–ª "–ë–æ—Ç—ã"** –∏–ª–∏ "–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏"
3. **–°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞**:
   - –ò–º—è: `AI Assistant Bot`
   - –û–ø–∏—Å–∞–Ω–∏–µ: `–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥—ã`
   - –ê–≤–∞—Ç–∞—Ä: –ó–∞–≥—Ä—É–∑–∏—Ç–µ –ª–æ–≥–æ—Ç–∏–ø –≤–∞—à–µ–π –∫–æ–º–∞–Ω–¥—ã

### –®–∞–≥ 2: –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–æ–≤

–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –±–æ—Ç–∞ –≤—ã –ø–æ–ª—É—á–∏—Ç–µ:
- **Bot Token** (–Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `001.`)
- **API Base URL** (–æ–±—ã—á–Ω–æ `https://api.vk.com/...`)

**–°–æ—Ö—Ä–∞–Ω–∏—Ç–µ —ç—Ç–∏ –¥–∞–Ω–Ω—ã–µ!** –û–Ω–∏ –ø–æ–Ω–∞–¥–æ–±—è—Ç—Å—è –¥–ª—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏.

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook

1. **URL –¥–ª—è webhook'–∞**: `https://your-domain.com/api/v1/integrations/vk-teams/webhook`
2. **–ú–µ—Ç–æ–¥**: POST
3. **–°–æ–±—ã—Ç–∏—è –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏**:
   - `message_new` - –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - `message_reply` - –æ—Ç–≤–µ—Ç—ã –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
   - `chat_join` - –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ —á–∞—Ç—É
   - `chat_leave` - –ø–æ–∫–∏–¥–∞–Ω–∏–µ —á–∞—Ç–∞

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è AI Assistant

### –®–∞–≥ 1: Environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env.vk_teams`:

```bash
# VK Teams Configuration
VK_TEAMS_BOT_TOKEN=001.–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞_–∑–¥–µ—Å—å
VK_TEAMS_API_URL=https://api.vk.com/method/
VK_TEAMS_WEBHOOK_URL=https://your-domain.com/api/v1/integrations/vk-teams/webhook
VK_TEAMS_SECRET_KEY=–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–¥–ª—è_–ø–æ–¥–ø–∏—Å–∏

# AI Assistant Configuration
AI_ASSISTANT_API_URL=http://localhost:8000
AI_ASSISTANT_API_KEY=–≤–∞—à_api_–∫–ª—é—á

# Webhook Security
VK_TEAMS_VERIFY_SIGNATURE=true
VK_TEAMS_WEBHOOK_SECRET=—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á_–¥–ª—è_–≤–µ–±—Ö—É–∫–∞

# Features Configuration
VK_TEAMS_ENABLE_SEARCH=true
VK_TEAMS_ENABLE_RFC_GENERATION=true
VK_TEAMS_ENABLE_CODE_REVIEW=true
VK_TEAMS_ENABLE_DOCUMENT_ANALYSIS=true

# Rate Limiting
VK_TEAMS_RATE_LIMIT_PER_USER=10
VK_TEAMS_RATE_LIMIT_WINDOW=60

# Logging
VK_TEAMS_LOG_LEVEL=INFO
VK_TEAMS_ENABLE_METRICS=true
```

### –®–∞–≥ 2: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ Docker Compose

–û–±–Ω–æ–≤–∏—Ç–µ `docker-compose.production.yml`:

```yaml
services:
  backend:
    environment:
      # –î–æ–±–∞–≤—å—Ç–µ VK Teams –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
      - VK_TEAMS_BOT_TOKEN=${VK_TEAMS_BOT_TOKEN}
      - VK_TEAMS_API_URL=${VK_TEAMS_API_URL}
      - VK_TEAMS_WEBHOOK_URL=${VK_TEAMS_WEBHOOK_URL}
      - VK_TEAMS_SECRET_KEY=${VK_TEAMS_SECRET_KEY}
      
  # –î–æ–±–∞–≤—å—Ç–µ VK Teams Bot —Å–µ—Ä–≤–∏—Å
  vk-teams-bot:
    build:
      context: ./infrastructure/vk_teams
      dockerfile: Dockerfile
    container_name: ai_assistant_vk_teams_bot
    restart: unless-stopped
    environment:
      - VK_TEAMS_BOT_TOKEN=${VK_TEAMS_BOT_TOKEN}
      - AI_ASSISTANT_API_URL=http://backend:8000
      - REDIS_URL=redis://redis:6379/2
    depends_on:
      - backend
      - redis
    networks:
      - ai_assistant_network
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:8080/health"]
      interval: 30s
      timeout: 10s
      retries: 3
```

### –®–∞–≥ 3: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Nginx

–î–æ–±–∞–≤—å—Ç–µ –≤ `nginx/nginx.prod.conf`:

```nginx
# VK Teams webhook endpoint
location /api/v1/integrations/vk-teams/ {
    proxy_pass http://backend:8000;
    proxy_set_header Host $host;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;
    
    # –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è VK Teams
    proxy_set_header X-VK-Teams-Signature $http_x_vk_teams_signature;
    proxy_set_header Content-Type application/json;
    
    # –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Ç–∞–π–º–∞—É—Ç—ã –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤
    proxy_connect_timeout 60s;
    proxy_send_timeout 60s;
    proxy_read_timeout 60s;
}
```

---

## üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ secrets

```bash
# –°–æ–∑–¥–∞–π—Ç–µ production secrets
mkdir -p secrets
echo "001.–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞" > secrets/vk_teams_bot_token.txt
echo "–≤–∞—à_—Å–µ–∫—Ä–µ—Ç–Ω—ã–π_–∫–ª—é—á" > secrets/vk_teams_secret_key.txt

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∞
chmod 600 secrets/*
```

### –®–∞–≥ 2: –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
# –°–æ–±–µ—Ä–∏—Ç–µ –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –æ–±—Ä–∞–∑—ã
docker-compose -f docker-compose.production.yml build

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose -f docker-compose.production.yml up -d

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å
docker-compose -f docker-compose.production.yml ps
```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ webhook –≤ VK Teams

```bash
# –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ webhook
curl -X POST "https://api.vk.com/method/messages.setWebhookUrl" \
  -H "Content-Type: application/json" \
  -d '{
    "url": "https://your-domain.com/api/v1/integrations/vk-teams/webhook",
    "access_token": "001.–≤–∞—à_—Ç–æ–∫–µ–Ω_–±–æ—Ç–∞",
    "v": "5.131"
  }'
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –®–∞–≥ 1: –ë–∞–∑–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

1. **–ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ–≥–æ –±–æ—Ç–∞** –≤ VK Teams
2. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**: `/help`
3. **–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç**:
   ```
   ü§ñ AI Assistant Bot
   
   –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:
   /search <–∑–∞–ø—Ä–æ—Å> - –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
   /rfc <—Ç–µ–º–∞> - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è RFC
   /analyze <–∫–æ–¥> - –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
   /help - –°–ø—Ä–∞–≤–∫–∞
   
   –ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏—Ç–µ –º–Ω–µ –ª—é–±–æ–π –≤–æ–ø—Ä–æ—Å!
   ```

### –®–∞–≥ 2: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–π

```bash
# –í VK Teams –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:

# 1. –ü–æ–∏—Å–∫
/search –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å Docker

# 2. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è RFC
/rfc —Å–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

# 3. –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞
/analyze
```python
def login(username, password):
    if username == "admin" and password == "123":
        return True
    return False
```

# 4. –û–±—ã—á–Ω—ã–π –≤–æ–ø—Ä–æ—Å
–ö–∞–∫ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö?
```

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ backend
docker-compose -f docker-compose.production.yml logs backend | grep vk_teams

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ VK Teams bot
docker-compose -f docker-compose.production.yml logs vk-teams-bot

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook –∑–∞–ø—Ä–æ—Å—ã
curl -s http://localhost:8000/api/v1/integrations/vk-teams/status
```

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### –®–∞–≥ 1: –ú–µ—Ç—Ä–∏–∫–∏

VK Teams –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ –≤ Prometheus:

```prometheus
# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π
vk_teams_messages_total{status="success|error"}

# –í—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞
vk_teams_response_time_seconds

# –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
vk_teams_active_users_total

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥
vk_teams_command_usage_total{command="search|rfc|analyze|help"}
```

### –®–∞–≥ 2: Grafana –¥–∞—à–±–æ—Ä–¥

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Grafana**: `http://localhost:3001`
2. **–õ–æ–≥–∏–Ω**: admin / admin123
3. **–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞—à–±–æ—Ä–¥**: `monitoring/grafana/dashboards/vk-teams.json`

### –®–∞–≥ 3: –ê–ª–µ—Ä—Ç—ã

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –∞–ª–µ—Ä—Ç—ã –≤ `monitoring/prometheus/alerts/vk-teams.yml`:

```yaml
groups:
  - name: vk_teams
    rules:
      - alert: VKTeamsHighErrorRate
        expr: rate(vk_teams_messages_total{status="error"}[5m]) > 0.1
        for: 2m
        labels:
          severity: warning
        annotations:
          summary: "–í—ã—Å–æ–∫–∏–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ –≤ VK Teams"
          
      - alert: VKTeamsSlowResponse
        expr: histogram_quantile(0.95, vk_teams_response_time_seconds) > 10
        for: 5m
        labels:
          severity: critical
        annotations:
          summary: "–ú–µ–¥–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã VK Teams –±–æ—Ç–∞"
```

---

## üîß –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ë–æ—Ç –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ webhook
curl -X POST "https://your-domain.com/api/v1/integrations/vk-teams/webhook" \
  -H "Content-Type: application/json" \
  -d '{"test": true}'

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
docker-compose logs backend | grep -i vk_teams | tail -20
```

**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ webhook –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ HTTPS —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—à–∏–±–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–∫–µ–Ω
curl -X POST "https://api.vk.com/method/messages.getConversations" \
  -d "access_token=001.–≤–∞—à_—Ç–æ–∫–µ–Ω&v=5.131"
```

**–†–µ—à–µ–Ω–∏–µ**:
- –ü–µ—Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –±–æ—Ç–∞
- –û–±–Ω–æ–≤–∏—Ç–µ secrets

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ú–µ–¥–ª–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
docker stats

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Redis
redis-cli -h localhost -p 6379 info stats
```

**–†–µ—à–µ–Ω–∏–µ**:
- –£–≤–µ–ª–∏—á—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ AI
- –í–∫–ª—é—á–∏—Ç–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

1. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ HTTPS** –¥–ª—è –≤—Å–µ—Ö webhook'–æ–≤
2. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ –ø–æ–¥–ø–∏—Å–∏** VK Teams –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ rate limit** –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
4. **–õ–æ–≥–∏—Ä—É–π—Ç–µ –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã** –¥–ª—è –∞—É–¥–∏—Ç–∞
5. **–û–±–Ω–æ–≤–ª—è–π—Ç–µ —Ç–æ–∫–µ–Ω—ã** —Ä–µ–≥—É–ª—è—Ä–Ω–æ

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

```python
# app/api/v1/integrations/vk_teams/security.py
import hashlib
import hmac
from fastapi import HTTPException

def verify_vk_teams_signature(payload: bytes, signature: str, secret: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏ VK Teams webhook"""
    expected_signature = hmac.new(
        secret.encode('utf-8'),
        payload,
        hashlib.sha256
    ).hexdigest()
    
    return hmac.compare_digest(signature, expected_signature)

def check_rate_limit(user_id: str) -> bool:
    """–ü—Ä–æ–≤–µ—Ä–∫–∞ rate limit –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"""
    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è rate limiting
    pass
```

---

## üì± –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∏–º–µ—Ä |
|---------|----------|--------|
| `/help` | –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º | `/help` |
| `/search <–∑–∞–ø—Ä–æ—Å>` | –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫ | `/search –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Docker` |
| `/rfc <—Ç–µ–º–∞>` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è RFC | `/rfc —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏` |
| `/analyze <–∫–æ–¥>` | –ê–Ω–∞–ª–∏–∑ –∫–æ–¥–∞ | `/analyze —Ñ—É–Ω–∫—Ü–∏—è –ª–æ–≥–∏–Ω–∞` |
| `/status` | –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã | `/status` |

### –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:

| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—Ä–∞–≤–∞ |
|---------|----------|-------|
| `/admin stats` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è | Admin |
| `/admin users` | –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | Admin |
| `/admin reload` | –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ | Admin |

---

## üöÄ –ò—Ç–æ–≥–æ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ health endpoint
curl -s https://your-domain.com/api/v1/integrations/vk-teams/health

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∏–∫
curl -s https://your-domain.com/metrics | grep vk_teams

# 3. –¢–µ—Å—Ç –≤ VK Teams
# –û—Ç–ø—Ä–∞–≤—å—Ç–µ: "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?"
# –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç: –î—Ä—É–∂–µ–ª—é–±–Ω—ã–π –æ—Ç–≤–µ—Ç –æ—Ç AI

# 4. –¢–µ—Å—Ç –∫–æ–º–∞–Ω–¥—ã
# –û—Ç–ø—Ä–∞–≤—å—Ç–µ: "/search Docker"
# –û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç: –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞ –ø–æ Docker

# 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
docker-compose logs vk-teams-bot | tail -10
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! VK Teams –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é.

### –ß—Ç–æ –¥–∞–ª—å—à–µ:
1. **–û–±—É—á–∏—Ç–µ –∫–æ–º–∞–Ω–¥—É** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞
2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö**
3. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** —á–µ—Ä–µ–∑ Grafana
4. **–°–æ–±–∏—Ä–∞–π—Ç–µ –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å** –¥–ª—è —É–ª—É—á—à–µ–Ω–∏–π

### –ü–æ–¥–¥–µ—Ä–∂–∫–∞:
- **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: `/docs/integrations/VK_TEAMS_README.md`
- **–õ–æ–≥–∏**: `docker-compose logs vk-teams-bot`
- **–ú–µ—Ç—Ä–∏–∫–∏**: `http://localhost:3001` (Grafana)
- **API**: `http://localhost:8000/docs` (Swagger)

---

**–£–¥–∞—á–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI Assistant –≤ VK Teams! üöÄ** 